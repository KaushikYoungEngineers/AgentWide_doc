<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Property API Documentation</title>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; background: #fdfdfd; padding: 2rem; }
    h1, h2, h3 { color: #222; }
    pre {
      background: #f4f4f4;
      padding: 1rem;
      border-left: 4px solid #007BFF;
      overflow-x: auto;
    }
    code { font-family: monospace; }
    .endpoint {
      margin-bottom: 2rem;
    }
    .note {
      background: #fff3cd;
      padding: 1rem;
      border-left: 4px solid #ffc107;
      margin: 1rem 0;
    }
  </style>
</head>
<body>
  <h1>üè° Property API Documentation</h1>

  <!-- Property Submission Flow with Agreement -->
  <div class="endpoint">
    <h2>1. Property Submission Flow (with Agreement)</h2>

    <h3>Step 1: Create or Save Property as Draft</h3>
    <h4>POST /api/v1/property/create</h4>
    <p><strong>Query Parameters:</strong></p>
    <pre><code>{
  "isDraft": true
}</code></pre>
    <p><strong>Body:</strong></p>
    <pre><code>{
  "title": "Luxury Apartment",
  "description": "Sea-facing 3BHK apartment",
  "type": "Apartment",
  "category": "Sale",
  "propertyUse": "Residential",
  "availability": "Immediate",
  "address": "123 Street Name",
  "city": "Mumbai",
  "state": "Maharashtra",
  "country": "India",
  "zipcode": "400001",
  "coordinates": { "lat": 19.07, "lng": 72.87 },
  "bedrooms": 3,
  "bathrooms": 2,
  "balconies": 2,
  "area": { "value": 1500, "unit": "sqft" },
  "builtYear": 2020,
  "floor": 5,
  "totalFloors": 10,
  "furnishing": "Semi-Furnished",
  "parking": true,
  "parkingType": "Garage",
  "coveredArea": 2,
  "uncoveredArea": 2,
  "hasSolar": "Yes",
  "solarWaterHeater": "Yes",
  "airConditioning": "Yes",
  "airConditioningType": "Partly",
  "amenities": ["Pool", "Gym", "Security"],
  "images": [File],
  "videos": [File],
  "virtualTour": "https://example.com/tour",
  "price": 500000,
  "currency": "INR",
  "priceNegotiable": true,
  "maintenanceCharge": 3000,
  "expectedDeposit": 50000,
  "pricePerSqft": 333.33,
  "ownerId": "USER123",
  "sellerAgentId": "AGENT001",
  "exclusiveListing": true,
  "listingStatus": "Pending",
  "availableFrom": "2025-05-01",
  "propertyDocuments": [File],
  "legalClearance": true,
  "loanEligible": true,
  "reraApproved": true,
  "reraNumber": "RERA12345",
  "status": "Available", // Available / Sold / Rented
  "buyerId": "USER123",
}</code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>{
  "status": "success",
  "message": "Property saved as draft",
  "data": {
    "propertyId": "abc123"
  }
}</code></pre>

    <h3>Step 2: Preview Agreement</h3>
    <h4>GET /api/v1/property/{propertyId}/preview-agreement</h4>
    <p><strong>Response:</strong></p>
    <pre><code>{
  "status": "success",
  "message": "Agreement preview generated",
  "data": {
    "propertyId": "abc123",
    "agreementText": "This is a preview of your agreement for listing XYZ...",
    "placeholders": {
      "ownerName": "John Doe",
      "agentCommission": "2.5%",
      "startDate": "2025-05-01",
      "endDate": "2025-06-01"
    }
  }
}</code></pre>

    <h3>Step 3: Generate Agreement</h3>
    <h4>POST /api/v1/property/{propertyId}/generate-agreement</h4>
    <p><strong>Request Body:</strong></p>
    <pre><code>{
  "startDate": "2025-05-01",
  "endDate": "2025-06-01"
}</code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>{
  "status": "success",
  "message": "Agreement generated successfully",
  "data": {
    "agreementUrl": "https://example.com/agreements/abc123.pdf"
  }
}</code></pre>

    <h3>Step 4: Sign Agreement</h3>
    <h4>POST /api/v1/property/{propertyId}/sign-agreement</h4>
    <p><strong>Request Body:</strong></p>
    <pre><code>{
  "signature": "base64-encoded-signature-image",
  "signedDate": "2025-04-21"
}</code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>{
  "status": "success",
  "message": "Agreement signed and submitted",
  "data": {
    "signedAgreementUrl": "https://example.com/signed/abc123.pdf"
  }
}</code></pre>

    <h3>Optional: Finalize Property Listing</h3>
    <h4>PATCH /api/v1/property/{propertyId}/finalize</h4>
    <p><strong>Response:</strong></p>
    <pre><code>{
  "status": "success",
  "message": "Property listing finalized and ready for admin approval",
  "data": null
}</code></pre>
  </div>

  <!-- 2. Get Property List -->
  <div class="endpoint">
    <h2>2. Get Property List</h2>
    <h3>GET /api/v1/properties</h3>
    <p><strong>Query Parameters:</strong></p>
    <pre><code>{
  "type": "Apartment",
  "category": "Rent",
  "city": "Delhi",
  "state": "Maharashtra",
  "minPrice": 100000,
  "maxPrice": 1000000,
  "bedrooms": 2,
  "limit": 10,
  "page": 1
}</code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>{
  "status": "success",
  "message": "Properties fetched successfully",
  "data": [ /* array of property objects */ ]
}</code></pre>
  </div>

  <!-- 3. Get Property by ID -->
  <div class="endpoint">
    <h2>3. Get Property Details</h2>
    <h3>GET /api/v1/properties/{propertyId}</h3>
    <p><strong>Response:</strong></p>
    <pre><code>{
  "status": "success",
  "message": "Property details fetched successfully",
  "data": { /* property object */ }
}</code></pre>
  </div>

  <!-- 4. Update Property -->
  <div class="endpoint">
    <h2>4. Update Property</h2>
    <h3>PATCH /api/v1/properties/{propertyId}</h3>
    <pre><code>{
  "price": 550000,
  "title": "Updated Apartment Title",
  "bedrooms": 4
}</code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>{
  "status": "success",
  "message": "Property updated successfully",
  "data": null
}</code></pre>
  </div>

  <!-- 5. Approve Property -->
  <div class="endpoint">
    <h2>5. Approve Property Listing</h2>
    <h3>PATCH /api/v1/properties/{propertyId}/approve</h3>
    <p><strong>Headers:</strong> Authorization: Bearer <code>{admin_token}</code></p>
    <p><strong>Response:</strong></p>
    <pre><code>{
  "status": "success",
  "message": "Property approved successfully",
  "data": null
}</code></pre>
  </div>

  <!-- 6. Reject Property -->
  <div class="endpoint">
    <h2>6. Reject Property Listing</h2>
    <h3>PATCH /api/v1/properties/{propertyId}/reject</h3>
    <p><strong>Headers:</strong> Authorization: Bearer <code>{admin_token}</code></p>
    <p><strong>Optional Body:</strong></p>
    <pre><code>{
  "reason": "Incomplete legal documents"
}</code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>{
  "status": "success",
  "message": "Property rejected",
  "data": null
}</code></pre>
  </div>

  <div class="note">
    <h3>üîç Notes:</h3>
    <ul>
      <li>Use <strong>multipart/form-data</strong> for file uploads (images, documents, etc.)</li>
      <li>Provide specific query parameters to filter property listings</li>
      <li><strong>All API responses follow a standard format:</strong><br>
        <pre><code>{
  "status": "success | error",
  "message": "Descriptive message",
  "data": { ... } // nullable or object/array
}</code></pre>
      </li>
    </ul>
  </div>

</body>
</html>
